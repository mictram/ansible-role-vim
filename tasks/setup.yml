---
- name: Create .vim directory
  ansible.builtin.file:
    path: "/home/{{ ansible_user_id }}/.vim"
    state: directory

- name: Create plugged directory
  ansible.builtin.file:
    path: "/home/{{ ansible_user_id }}/.vim/plugged"
    state: directory

- name: Install vim configuration
  ansible.builtin.copy:
    src: vimrc
    dest: "/home/{{ ansible_user_id }}/.vim/vimrc"
    force: yes

- name: Install flake8 configuration
  ansible.builtin.copy:
    src: flake8
    dest: "/home/{{ ansible_user_id }}/.config/flake8"
    force: yes

- name: Symlink vim configuration
  ansible.builtin.file:
    src: "/home/{{ ansible_user_id }}/.vim/vimrc"
    dest: "/home/{{ ansible_user_id }}/.vimrc"
    state: link
